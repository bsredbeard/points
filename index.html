<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Points!</title>
        <meta charset="utf8" />
        <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
        <style type="text/css">
html{ height: 100% }
body{
    margin: 0;
    height: 100vh;
    background-color: #1a1a1a;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    overflow: hidden;
}
main {
    height: 100vh;
    overflow: hidden;
    position: relative;
}
.card {
  position: absolute;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100%;
  font-size: 40vw;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transform: translateX(0);
  transition-property: opacity,transform;
  transition-duration: 0.25s;
  transition-timing-function: linear,ease-out;
  user-select: none;
}
.card.current {
  opacity: 1;
}
.card.next {
  transform: translateX(50vw) rotateY(75deg);
}
.card.prev {
  transform: translateX(-50vw) rotateY(-75deg);
}
aside {
    display: none;
}
        
        </style>
    </head>
    <body>
        <main id="app">
            <div v-for="(card, idx) in cards"
                 :class="{card: true, current: idx === selected, next: isNext(card), prev: isPrev(card)}">{{card}}</div>
            </div>
        </main>
        <aside id="settings" class="visible">
            <section class="chrome">
                <button class="close">&times;</button>
            </section>
            <section class="content">
                <h1>
                    Points!
                    <small>A phone application for estimating complexity</small>
                </h1>
                <h2>Instructions</h2>
                <ul>
                    <li>Choose a set of points from the list below (or enter your own)</li>
                    <li>Close this dialog using the &times; button in the top-right corner of the screen</li>
                    <li>Swipe left and right to rotate through the selected point values</li>
                    <li>Access this dialog at any time by clicking on the ðŸ’­ icon</li>
                </ul>
                <h2>Point Values</h2>
                <div>
                    <label>
                        <input type="radio" name="selectedValues" value="0 Â½ 1 2 3 5 8 13 20 100 âˆž" />
                        0 Â½ 1 2 3 5 8 13 20 100 âˆž
                    </label>
                </div>
                <div>
                    <label>
                        <input type="radio" name="selectedValues" value="custom" />
                        <input type="text" name="customValues" value="0 Â½ 1 2 3 5 8 13 20 100 âˆž">
                    </label>
                </div>
            </section>
        </aside>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="https://unpkg.com/hammerjs@2.0.6/hammer.js"></script>
        <script type="text/javascript">
            var app = new Vue({
                el: '#app',
                data: {
                    cards: ['0', 'Â½', '1', '2', '3', '5', '8', '13', '20', '100', 'âˆž'],
                    selected: 5
                },
                methods: {
                    swipeLeft: function(){
                        this.selected = this.selected + 1 < this.cards.length ?
                            this.selected + 1 :
                            0;
                    },
                    swipeRight: function(){
                        this.selected = this.selected > 0 ? this.selected - 1 : this.cards.length - 1;
                    },
                    isPrev: function(card){
                        var idx = this.cards.indexOf(card);
                        return this.selected === 0 ?
                            idx === this.cards.length - 1 :
                            idx === this.selected - 1;
                    },
                    isNext: function(card){
                        var idx = this.cards.indexOf(card);
                        return this.selected === this.cards.length - 1 ?
                            idx === 0 :
                            idx === this.selected + 1;
                    }
                }
            });

            var swipeDetection = new Hammer(app.$el);
            swipeDetection.on('tap', function(e){
                console.log('TAP!');
                app.swipeLeft();
            });
            swipeDetection.on('swipe', function(e){
                if(e.direction === 2){
                    app.swipeLeft();
                } else {
                    app.swipeRight();
                }
            });

        </script>
    </body>
</html>
